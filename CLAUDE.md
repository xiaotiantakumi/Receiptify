# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a **PWA (Progressive Web App) starter template** built with Next.js and Azure Functions. This template is designed to be cloned or used as a GitHub template for new projects. The template provides:

1. **Next.js Frontend**: A modern React-based frontend with TypeScript support
2. **Azure Functions API**: Serverless backend with a simple Hello World endpoint
3. **PWA Support**: Service worker, manifest, and offline capabilities via next-pwa
4. **Azure Static Web Apps**: Configured for easy deployment

## Architecture

### Frontend (Next.js App)

- **Framework**: Next.js 14 with App Router and TypeScript
- **Static Export**: Configured for static export (`output: 'export'`) for Azure Static Web Apps
- **PWA**: Progressive Web App support with service worker and manifest
- **Styling**: Tailwind CSS for UI components
- **Theme**: Dark mode support with theme toggle

### Backend (Azure Functions)

- **API Location**: `api/` directory with TypeScript Azure Functions
- **Hello Endpoint**: Simple REST API at `/api/hello`
- **CORS**: Configured for cross-origin requests

### Key Components

- `app/page.tsx`: Main landing page with Hello World functionality
- `app/components/header.tsx`: Application header component
- `app/components/theme-toggle.tsx`: Dark/light theme switcher
- `api/src/functions/hello.ts`: Hello World API endpoint

## Development Commands

### Local Development

```bash
# Install dependencies for both frontend and API
npm install && cd api && npm install && cd ..

# Frontend development server only
npm run dev

# Build API separately
cd api && npm run build

# Run integrated environment (frontend + API together)
npm run swa:all

# Alternative: Run with API
npm run dev:with-api
```

### Production Builds

```bash
# Build frontend for static export
npm run build

# Build API
npm run build:api

# Both at once
npm run build && npm run build:api
```

### Testing and Linting

```bash
# Frontend linting
npm run lint
```

## Key Technical Details

### Azure Functions API

- Single HTTP trigger function: `hello`
- Route: `GET/POST /api/hello`
- Accepts: Query parameter `name` or request body
- Returns: JSON response with greeting message

### Static Export Configuration

- Output directory: `out/` (configured in next.config.mjs)
- Images: Unoptimized for static hosting
- PWA assets: Generated in `public/` directory

### PWA Features

- Offline HTML page: `public/offline.html`
- Service worker: Auto-generated by next-pwa
- Manifest: `public/manifest.json` with icon sets

## Azure Static Web Apps Configuration

The project uses `staticwebapp.config.json` for deployment:

- API runtime: Node.js 22.14.0
- Route handling for `/api/*` endpoints
- CSP headers for security

## Important File Locations

- Frontend entry: `app/page.tsx`
- Main API: `api/src/functions/hello.ts`
- Build outputs: `out/` (frontend), `api/dist/` (API)
- Config files: `next.config.mjs`, `staticwebapp.config.json`, `tailwind.config.ts`
- PWA config: `public/manifest.json`

## Getting Started (For Template Users)

When someone uses this template:

1. Use as GitHub template or clone this repository
2. Install dependencies: `npm install && cd api && npm install && cd ..`
3. Run locally with Makefile: `make start`
4. Open http://localhost:4280 in your browser
5. The API will be available at http://localhost:4280/api/hello
6. Customize the template for their specific project

## Customization Guide

### Adding New API Endpoints

1. Create a new file in `api/src/functions/`
2. Use the Azure Functions v4 programming model
3. Export the function with appropriate HTTP trigger configuration

### Modifying the Frontend

1. Update `app/page.tsx` for main content
2. Add new components in `app/components/`
3. Modify theme in `tailwind.config.ts`

### PWA Configuration

1. Update `public/manifest.json` with your app details
2. Replace icons in `public/` directory
3. Modify offline page at `public/offline.html`

## Deployment

This template is configured for Azure Static Web Apps:

1. Push to GitHub
2. Create a new Azure Static Web App
3. Connect to your GitHub repository
4. Azure will automatically build and deploy

## Development Reminders

- Always run `npm run lint` before committing
- Ensure both frontend and API build successfully
- Test PWA features in production build

## Template Maintenance Notes

This is a template project, so when making changes:

- Keep examples simple and generic
- Maintain clear documentation for template users
- Ensure all template functionality works out-of-the-box
- Update both CLAUDE.md and README.md when making structural changes